services:
  - docker

jobs:
  include:
    - stage: Unit_test
      if: branch != master

      before_install:
        - docker pull ubuntu
        - docker build -t logickee/ubuntu-1804-zsh .

      script:
        # - tests/run_test.sh
        - docker container prune -f
        - docker build -t logickee/ubuntu-1804-zsh .
        - rm -rf /home/logic/_workspace/dotfiles/logs/*.log
        - cat tests/full_docker_commands.sh | while read i; do printf "%q\n" "$i"; done | xargs --max-procs=99 -I CMD bash -c CMD
        - docker container prune -f
        - echo 'helloworld'
