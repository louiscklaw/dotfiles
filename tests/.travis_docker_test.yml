services:
  - docker

jobs:
  include:
    - stage: Unit_test
      if: branch != master

      before_install:
        - docker pull ubuntu
        - docker build -t logickee/ubuntu-1804-zsh .
        - docker container prune -f
        - rm -rf /home/logic/_workspace/dotfiles/logs/*.log

      script:
        # - tests/run_test.sh
        # - travis_wait 50 cat tests/full_docker_commands.sh | while read i; do printf "%q\n" "$i"; done | xargs --max-procs=99 -I CMD bash -c CMD
        - docker run -t logickee/ubuntu-1804-zsh /installHelloworld.sh | tee logs/docker_installHelloworld.log
        - docker run -t logickee/ubuntu-1804-zsh /installCode.sh | tee logs/docker_installCode.log



        - docker run -t logickee/ubuntu-1804-zsh /installAliWangWang.sh | tee logs/docker_installAliWangWang.log
        - docker run -t logickee/ubuntu-1804-zsh /installAndroidStudio.sh | tee logs/docker_installAndroidStudio.log
        - docker run -t logickee/ubuntu-1804-zsh /installArgos.sh | tee logs/docker_installArgos.log
        - docker run -t logickee/ubuntu-1804-zsh /installCaffeine.sh | tee logs/docker_installCaffeine.log
        - docker run -t logickee/ubuntu-1804-zsh /installChinese.sh | tee logs/docker_installChinese.log


        - docker run -t logickee/ubuntu-1804-zsh /installCUHKUbuntuRepo.sh | tee logs/docker_installCUHKUbuntuRepo.log
        - docker run -t logickee/ubuntu-1804-zsh /installDocker.sh | tee logs/docker_installDocker.log
        - docker run -t logickee/ubuntu-1804-zsh /installDockerCompose.sh | tee logs/docker_installDockerCompose.log
        - docker run -t logickee/ubuntu-1804-zsh /installDynamicTopBar.sh | tee logs/docker_installDynamicTopBar.log
        - docker run -t logickee/ubuntu-1804-zsh /installFirebaseTools.sh | tee logs/docker_installFirebaseTools.log
        - docker run -t logickee/ubuntu-1804-zsh /installFranz.sh | tee logs/docker_installFranz.log
        - docker run -t logickee/ubuntu-1804-zsh /installFreecad.sh | tee logs/docker_installFreecad.log
        - docker run -t logickee/ubuntu-1804-zsh /installFresh.sh | tee logs/docker_installFresh.log
        - docker run -t logickee/ubuntu-1804-zsh /installGestureDelete.sh | tee logs/docker_installGestureDelete.log
        - docker run -t logickee/ubuntu-1804-zsh /installGit.sh | tee logs/docker_installGit.log
        - docker run -t logickee/ubuntu-1804-zsh /installGitKraken.sh | tee logs/docker_installGitKraken.log
        - docker run -t logickee/ubuntu-1804-zsh /installGnomeAnimations.sh | tee logs/docker_installGnomeAnimations.log
        - docker run -t logickee/ubuntu-1804-zsh /installGnomeUtil.sh | tee logs/docker_installGnomeUtil.log
        - docker run -t logickee/ubuntu-1804-zsh /installGsconnect.sh | tee logs/docker_installGsconnect.log



        - docker run -t logickee/ubuntu-1804-zsh /installInkscape.sh | tee logs/docker_installInkscape.log
        - docker run -t logickee/ubuntu-1804-zsh /installIntellij.sh | tee logs/docker_installIntellij.log
        - docker run -t logickee/ubuntu-1804-zsh /installKicad.sh | tee logs/docker_installKicad.log
        - docker run -t logickee/ubuntu-1804-zsh /installKrita.sh | tee logs/docker_installKrita.log
        - docker run -t logickee/ubuntu-1804-zsh /installLaCapitaine.sh | tee logs/docker_installLaCapitaine.log
        - docker run -t logickee/ubuntu-1804-zsh /installLibreoffice.sh | tee logs/docker_installLibreoffice.log
        - docker run -t logickee/ubuntu-1804-zsh /installMagicWormHole.sh | tee logs/docker_installMagicWormHole.log
        - docker run -t logickee/ubuntu-1804-zsh /installMeld.sh | tee logs/docker_installMeld.log
        - docker run -t logickee/ubuntu-1804-zsh /installNautilus.sh | tee logs/docker_installNautilus.log


      after_script:
        - docker container prune -f
